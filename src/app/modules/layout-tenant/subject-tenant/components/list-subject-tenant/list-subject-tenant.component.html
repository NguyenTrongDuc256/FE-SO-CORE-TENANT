<div class="padding-compo" *transloco="let t; scope: 'subject'">
  <div class="header-card d-flex align-items-center justify-content-between w-100">
    <div class="title-content  mb-3">
      <span class="fs-18 fw-700">{{ t('subject.subjectManager') }}</span>
    </div>

    <div class="d-flex align-items-center justify-content-end nav-bar">
      <div class=" mb-3 select-status">
        <select class="w-100 fs-13 fw-700 form-select form-select-solid form-select-lg" name="btn-subject"
          id="subjectType" [(ngModel)]="subjectType" (change)="changeIsActie()">
          <option value="">{{ t('subject.subject') }}</option>
          <option value="1">{{ t('subject.subjectMoet') }}</option>
          <option value="2">{{ t('subject.subjectPrivate') }}</option>
          <option value="3">{{ t('subject.subjectBilingual') }}</option>
        </select>
      </div>
      <!-- <div class=" mb-3 select-status">
        <select class="w-100 fs-13 fw-700 form-select form-select-solid form-select-lg" name="btn-grade" id="grade"
          [(ngModel)]="gradeType" (change)="changeIsActie()">
          <option value="">{{ t('subject.grade') }}</option>
          <option *ngFor="let item of listGrade" value="Khá»‘i {{item}}">
            {{ t('subject.grade') }} {{item}}
          </option>
        </select>
      </div> -->
      <div class=" mb-3 select-status">
        <select class="w-100 fs-13 fw-700 form-select form-select-solid form-select-lg" name="btn-educationalStages"
          id="educationalStages" [(ngModel)]="educationalStages" (change)="changeIsActie()">
          <option value="">{{ t('subject.educationalStages') }}</option>
          <option value="5">{{ t('subject.primarySchool') }}</option>
          <option value="4">{{ t('subject.secondarySchool') }}</option>
          <option value="3">{{ t('subject.highSchool') }}</option>
        </select>
      </div>
      <div class="search-input  mb-3">
        <input type="text" class="form-control custom-tag-of-form fs-13 fw-400" placeholder="{{ t('search') }}"
          [(ngModel)]="keyWord" name="btn-search" (keyup.enter)="changeIsActie()">
        <img class="search-icon" src="assets/images/svg/search.svg" alt="" (click)="changeIsActie()">
      </div>
      <ng-template ngxPermissionsOnly="{{ permission.subject_manager }}">
        <div class="card-button mb-3">
          <button class="add-action fs-13 fw-600 w-100" (click)="createSubject()" name="btn-create">
            <div class="d-flex align-items-center justify-content-center">
              <img class="add-icon" src="assets/images/svg/add.svg" alt="">
              <span class="fs-13 fw-600">{{ t('btnAction.add') }}</span>
            </div>
          </button>
        </div>
      </ng-template>
    </div>
  </div>

  <div class="body-card ">
    <table class="table table-global align-middle">
      <thead>
        <tr>
          <th class="fs-14 fw-700 text-center" style="width: 10%;">
            {{ t('subject.order') }}
          </th>
          <th class="fs-14 fw-700 " style="width: 17%;">
            {{ t('subject.subjectName') }}
          </th>
          <th class="fs-14 fw-700 " style="width: 14%;">
            {{ t('subject.subjectCode') }}
          </th>
          <th class="fs-14 fw-700 " style="width: 15%;">
            {{ t('subject.subject') }}
          </th>
          <!-- <th class="fs-14 fw-700 " style="width: 12%;">
            {{ t('subject.grade') }}
          </th> -->
          <th class="fs-14 fw-700 " style="flex-grow: 1;">
            {{ t('subject.educationalStagesApply') }}
          </th>
          <th class="fs-14 fw-700 " style="width: 12%;">
            {{ t('action') }}
          </th>
        </tr>
      </thead>

      <tbody class="fw-bold">
        <tr *ngFor="let item of listSubject;let i = index">
          <td class="fs-13 fw-500 text-center">{{i+1}}</td>
          <td class="fs-13 fw-700 subject-color ">{{item.name}}</td>
          <td class="fs-13 fw-500">{{ item.code }}</td>
          <td class="fs-13 fw-700">
            <div *ngIf="item.subjectType == 1"
              class=" d-flex justify-content-center align-items-center subject-style  subject-moet">
              <span class=" fs-13 fw-700 ">{{
                t('subject.subjectMoet') }}</span>
            </div>
            <div *ngIf="item.subjectType == 2"
              class=" d-flex justify-content-center align-items-center subject-style subject-private  ">
              <span class="fs-13 fw-700 ">{{
                t('subject.subjectPrivate') }}</span>
            </div>
            <div *ngIf="item.subjectType == 3"
              class=" d-flex justify-content-center align-items-center subject-style subject-bilingual">
              <span class=" fs-13 fw-700 ">{{
                t('subject.subjectBilingual') }}</span>
            </div>
          </td>
          <!-- <td class="fs-13 fw-500">{{ item.gradeType }}</td> -->
          <td class="fs-13 fw-700">
            <span class="stages-high-school  fs-13 fw-700 p-right" *ngFor="let edu of item.educationalStages">
              <span *ngIf="edu == 5" class="stages-primarry-school">{{ t('subject.primarySchool') }}</span>
              <span *ngIf="edu == 4" class="stages-secondary-school">{{ t('subject.secondarySchool') }}</span>
              <span *ngIf="edu == 3" class="stages-high-school">{{ t('subject.highSchool') }}</span>
            </span>
          </td>
          <td class="color-td fs-11 fw-700">
            <ng-template ngxPermissionsOnly="{{ permission.subject_manager }}">
              <div class="d-flex justify-content-center activate" *ngIf="item.subjectType != 1">
                <span nz-dropdown [nzDropdownMenu]="menu" nzTrigger="hover"
                  class="so-btn-open-drop-menu so-btn-open-drop-menu-three-dot d-flex align-items-center justify-content-center"
                  name="btn-open-menu">
                  <img src="assets/images/svg/three_vertical_dot_icon.svg" alt="">
                </span>
              </div>
              <nz-dropdown-menu #menu="nzDropdownMenu">
                <ul nz-menu>
                  <ng-template ngxPermissionsOnly="{{ permission.subject_manager }}">
                    <li nz-menu-item class="fs-13 fw-600 custom-action-item" (click)=" updateSubject(item)">
                      <img class="action-icon" src="assets/images/svg/edit.svg" alt="">{{ t('btnAction.update') }}
                    </li>
                  </ng-template>
                  <ng-template ngxPermissionsOnly="{{ permission.subject_manager }}">
                    <li nz-menu-item class="fs-13 fw-600 custom-action-item" (click)="removeSubject(item.id)"><img
                        class="action-icon" src="assets/images/svg/icon-delete.svg" alt="">{{t('btnAction.delete')
                      }}</li>
                  </ng-template>
                </ul>
              </nz-dropdown-menu>
            </ng-template>
          </td>
        </tr>
        <tr *ngIf="listSubject?.length == 0 || !listSubject">
          <td class="text-no-data" colspan="5">{{t('noData')}}</td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="footer-card">
    <app-pagination [pageSize]="pageSize" [pageIndex]="pageIndex" [collectionSize]="collectionSize"
      [sizeOption]="sizeOption" (paginationChange)="paginationChange($event)" *ngIf="collectionSize >= sizeOption[0]">
    </app-pagination>
  </div>
  <div class="spinner" *ngIf="isLoading">
    <app-loading></app-loading>
  </div>
</div>
<div class="bg-white p-8 h-full border-radius-bg" *transloco="let t; scope: 'student-records'">
  <!-- start header -->
  <div class="d-flex algin-items-center justify-content-between flex-wrap">
    <h3 class="title-compo-global mb-3">{{t('studentRecords.studentRecords')}} </h3>
    <div class="filter d-flex flex-wrap algin-items-center mb-3">
      <select name="class" id="class" [(ngModel)]="classId" class="so-select mx-4" (ngModelChange)="filter()">
        <option [value]="''">{{t('class')}}</option>
        <ng-container *ngFor="let class of arrClasses">
          <option [value]="class.id">{{class.name}}</option>
        </ng-container>
      </select>

      <div class="so-input-search mx-4">
        <nz-input-group [nzSuffix]="suffixIconSearch">
          <input type="text" name="input-search" nz-input placeholder="{{t('studentRecords.search')}}" #searchInput
            (keydown)="search($event, searchInput.value)" />
        </nz-input-group>
        <ng-template #suffixIconSearch>
          <img src="assets/images/svg/search.svg" alt="" nzType="search">
        </ng-template>
      </div>
      <ng-template ngxPermissionsOnly="{{ permission.student_file_user_modify }}">
        <button class="so-btn btn-import-export mx-2" (click)="import()" name="btn-import">
          <img src="assets/images/svg/icon-import.svg" alt="">
          {{t('btnAction.import')}}
        </button>
      </ng-template>
    </div>
  </div>
  <!-- end header -->

  <!-- content -->
  <div class="mt-12">
    <table class="table-global w-full mb-4">
      <caption></caption>
      <thead>
        <th style="width: 7%;" class="text-header-table"> {{t('STT')}}</th>
        <th style="width: 25%;" class="text-header-table"> {{t('fullName')}}</th>
        <th style="width: 15%;" class="text-header-table"> {{t('class')}} </th>
        <th style="width: 15%;" class="text-header-table"> {{t('birthday')}} </th>
        <th style="width: 15%;" class="text-header-table"> {{t('gender')}} </th>
        <th style="width: 18%;" class="text-header-table"> {{t('studentRecords.recordsCompleted')}} </th>
      </thead>
      <tbody>
        <ng-container *ngFor="let item of arrList; let i=index">
          <tr>
            <td>
              {{isLoading ? (oldPageIndex-1)*pageSize + i + 1 : (pageIndex-1)*pageSize + i + 1}}
            </td>
            <td class="text-content-table">
              <div class="d-inline-flex align-items-center cursor-pointer" [routerLink]="item.studentUserId">
                <img [src]="item.avatar || avatarDefault" alt="" class="avatar">
                <div>
                  <span class="fs-14 d-block text-link fw-600">{{item.fullName}}</span>
                  <span class="fs-13 color-primary"><span class="text-link">Mã HS:&nbsp;</span>{{item.code}}</span>
                </div>
              </div>
            </td>
            <td>
              {{item?.className}}
            </td>
            <td>
              {{item?.birthday | formatTime}}
            </td>
            <td>
              <span class="so-badge so-badge-status so-badge-status-{{item?.gender}}">
                {{t(item?.genderName)}}
              </span>
            </td>
            <td>
              <span class="text-link">{{item.countFileUser}}/{{item.countFileUserImperative}} danh mục hồ sơ</span>
            </td>
          </tr>
        </ng-container>
        <tr *ngIf="arrList?.length == 0 || !arrList">
          <td class="text-no-data" colspan="6">{{t('noData')}}</td>
        </tr>
      </tbody>
    </table>

    <app-pagination [pageSize]="pageSize" [pageIndex]="pageIndex" [collectionSize]="collectionSize"
      *ngIf="collectionSize > sizeOption[0]" [sizeOption]="sizeOption" (paginationChange)="paginationChange($event)">
    </app-pagination>
  </div>
  <!-- end content -->
</div>

<div class="spinner" *ngIf="isLoading">
  <app-loading></app-loading>
</div>
